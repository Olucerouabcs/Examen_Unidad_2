<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crossy road</title>
    <style>
        canvas{
            background-color: white;
        }
        body{
            background-color:gray;
        }
    </style>
</head>
<body>
    <center>
        <canvas id="myCanvas" width="700" height="900" style="border:2px solid #000000;"></canvas>
    </center>
    <script>
        var canvas = document.getElementById('myCanvas'); 
        var ctx = canvas.getContext("2d");

        var mainX=0, mainY=0, vida=0;
        var pause=false;
        var dir, paso=50;

        function tablero(){
            ctx.fillStyle = "rgb(255,105,97)";
            ctx.fillRect(0, 0, 100, 900);

            ctx.fillStyle = "rgb(255,105,97)";
            ctx.fillRect(canvas.width-100, 0, 100, 900);

            ctx.font = "20px Arial";
            ctx.fillStyle = "black"; 
            ctx.fillText("Tiempo" , 10, 40)
            //Poner que funcione el tiempo
            ctx.fillText("00:00" , 10, 70)
            ctx.fillText("Nivel" , 10, 130)
            //Poner que funcione el contador de nivel
            ctx.fillText("0" , 60, 130)
        
            //Contador de vidas
            ctx.fillText("Vidas" , 10, 210)
            ctx.fillText("0" , 70, 210)
        }

        tablero();

        document.addEventListener("keydown", (e) => {
            console.log(e);
            switch (e.keyCode) {
        case 87:
            if (!pause) { 
                dir = 1;
                moveObjetos(0,paso);
            }
            break;
        case 83:
            if (!pause) { 
                dir = 2;
                moveObjetos(0,-paso);
            }
            break;
        case 68:
            if (!pause) { 
                dir = 3;
                movePlayer(paso,0);
            }
            break;
        case 65:
            if (!pause) { 
                dir = 4;
                movePlayer(-paso,0);
            }
            break;
        case 32:
            pause = !pause;
            break;
        }

        });
        function repaint() {
            if(!pause){
                ctx.fillStyle = "white";
                ctx.fillRect(0, 0, 700, 900);

                tablero()

               repintarObjetos();
               jugador.dibujar();
               
            }else{
                ctx.fillStyle = "rgba(154,160,154,0.020)";
                ctx.fillRect(0, 0, 700, 900);

                ctx.font = "40px Arial";
                ctx.fillStyle = "black"; 
                ctx.fillText("p "+"a "+"u "+"s "+"a", 700/ 2 - 120, 900/ 2);
            }
        }

        function update() {
            if(pause==false){
                console.log("dir " + dir);

                switch (dir) {
                    case 1:
                        //cesped.y += paso;
                        break;
                    case 2:
                        //cesped.y -= paso;
                        break;
                    case 3:
                        //jugador.x += paso;

                        break;
                    case 4:
                        //jugador.x -= paso;

                        break;
                }
            }
            repaint();
            window.requestAnimationFrame(update);
        }

        window.requestAnimationFrame = (function () {
            return window.requestAnimationFrame ||
                window.webkitRequestAnimationFrame ||
                window.mozRequestAnimationFrame ||
                function (callback) {
                    window.setTimeout(callback, 17);
                };
        }());

        window.requestAnimationFrame(update);



        class Jugador {
            constructor() {
                this.x = (canvas.width/2)-25; // Coordenada X inicial
                this.y = 600; // Coordenada Y inicial
                this.width = 50; // Ancho del cuadro
                this.height = 50; // Alto del cuadro
            }

            dibujar() {
                //ctx.clearRect(0, 0, canvas.width, canvas.height); // Limpiar el lienzo
                ctx.fillStyle = 'black'; // Color del cuadro (en este caso, azul)
                ctx.fillRect(this.x, this.y, this.width, this.height); // Dibujar el cuadro
            }
        }

        // Crear una instancia de Jugador
        const jugador = new Jugador();

        // Dibujar el jugador en el lienzo
        jugador.dibujar();

        class Rio{
            constructor(dy) {
                this.x = 100; // Coordenada X inicial
                this.y = dy; // Coordenada Y inicial
                this.width = 500; // Ancho del cuadro
                this.height = 300; // Alto del cuadro
            }

            dibujar() {
                //ctx.clearRect(0, 0, canvas.width, canvas.height); // Limpiar el lienzo
                ctx.fillStyle = 'blue'; // Color del cuadro (en este caso, azul)
                ctx.fillRect(this.x, this.y, this.width, this.height); // Dibujar el cuadro
            }

        }

        // Crear una instancia de Jugador
        const rio1 = new Rio(200);
        const rio2 = new Rio(-500);

        // Dibujar el jugador en el lienzo
        rio1.dibujar();
        rio2.dibujar();

        class Carretera{
            constructor() {
                this.x = 300; // Coordenada X inicial
                this.y = 300; // Coordenada Y inicial
                this.width = 100; // Ancho del cuadro
                this.height = 50; // Alto del cuadro
            }

            dibujar() {
                //ctx.clearRect(0, 0, canvas.width, canvas.height); // Limpiar el lienzo
                ctx.fillStyle = 'grey'; // Color del cuadro (en este caso, azul)
                ctx.fillRect(this.x, this.y, this.width, this.height); // Dibujar el cuadro
            }

        }

        // Crear una instancia de Jugador
        const carretera = new Carretera();

        // Dibujar el jugador en el lienzo
        carretera.dibujar();

        class Cesped{
            constructor() {
                this.x = 400; // Coordenada X inicial
                this.y = 400; // Coordenada Y inicial
                this.width = 100; // Ancho del cuadro
                this.height = 50; // Alto del cuadro
            }

            dibujar() {
                //ctx.clearRect(0, 0, canvas.width, canvas.height); // Limpiar el lienzo
                ctx.fillStyle = 'green'; // Color del cuadro (en este caso, azul)
                ctx.fillRect(this.x, this.y, this.width, this.height); // Dibujar el cuadro
            }

        }

        // Crear una instancia de Jugador
        const cesped = new Cesped();

        // Dibujar el jugador en el lienzo
        cesped.dibujar();

        function repintarObjetos(){
            rio1.dibujar();
            rio2.dibujar();
            cesped.dibujar();
            carretera.dibujar(); 
        }


        function movePlayer(dx, dy) {
         // Mueve al jugador en la dirección especificada (dx, dy)
         jugador.x += dx;
         jugador.y += dy;
         repaint();
        }

        function moveObjetos(dx, dy) {
         // Mueve al jugador en la dirección especificada (dx, dy)
         cesped.x += dx;
         cesped.y += dy;

         rio1.x += dx;
         rio1.y += dy;

         
         rio2.x += dx;
         rio2.y += dy;

         carretera.x += dx;
         carretera.y += dy;
         repaint();
        }

    </script>
    
</body>
</html>